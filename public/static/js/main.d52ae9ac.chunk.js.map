{"version":3,"sources":["components/CredentialsForm/CredentialsForm.module.css","components/Story/Story.module.css","components/ProfileHeader/ProfileHeader.module.css","components/NewStory/NewStory.module.css","components/ErrorBox/ErrorBox.module.css","components/Navbar/Navbar.module.css","pages/Feed/Feed.module.css","pages/LogIn/LogIn.module.css","pages/Profile/Profile.module.css","pages/SignUp/SignUp.module.css","components/CredentialsForm/CredentialsForm.tsx","components/ErrorBox/ErrorBox.tsx","components/Story/Story.tsx","components/NewStory/NewStory.tsx","requests/auth.ts","requests/profile.ts","requests/stories.ts","components/Navbar/Navbar.tsx","pages/Feed/Feed.tsx","pages/LogIn/LogIn.tsx","components/ProfileHeader/ProfileHeader.tsx","pages/Profile/Profile.tsx","pages/SignUp/SignUp.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","CredentialsForm","props","useState","email","setEmail","password","setPassword","word","type","className","styles","title","error","onSubmit","event","preventDefault","formGroup","htmlFor","name","value","onChange","e","target","btn","separator","action","method","ErrorBox","container","Story","hideImage","author","src","story","id","avatar","alt","mainContent","href","link","authorName","onDelete","deletion","onClick","NewStory","setTitle","setLink","onCreate","required","logIn","credentials","a","axios","post","response","data","logOut","signUp","updateProfile","username","formData","FormData","set","headers","fetchStories","authorId","get","params","createStory","deleteStory","storyId","delete","Navbar","history","useHistory","onLogOut","push","navbar","currentUser","to","Feed","storiesLoaded","setStoriesLoaded","stories","setStories","setError","useEffect","then","catch","err","console","log","map","LogIn","user","onLogIn","ProfileHeader","setUsername","setAvatar","avatarCacheId","onUpdate","files","Profile","Date","now","setAvatarCacheId","refreshStories","onProfileChange","deleteStoryAndRefresh","SignUp","onSignUp","App","userCookie","cookie","document","JSON","parse","getCurrentUserFromCookie","setCurrentUser","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d52ae9ac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"CredentialsForm_title__1tO69\",\"error\":\"CredentialsForm_error__2AL0x\",\"formGroup\":\"CredentialsForm_formGroup__rLGVk\",\"separator\":\"CredentialsForm_separator__1QBoF\",\"btn\":\"CredentialsForm_btn__3dSMn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Story_container__1XefJ\",\"author\":\"Story_author__3_o9a\",\"mainContent\":\"Story_mainContent__2Pj_3\",\"title\":\"Story_title__2xZRm\",\"authorName\":\"Story_authorName__3aVrq\",\"deletion\":\"Story_deletion__27ckn\",\"avatar\":\"Story_avatar__1cMeH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ProfileHeader_container__2R0D7\",\"avatar\":\"ProfileHeader_avatar__2o4uw\",\"author\":\"ProfileHeader_author__3I847\",\"formGroup\":\"ProfileHeader_formGroup__3vCj7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formGroup\":\"NewStory_formGroup__1c2Y9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ErrorBox_container__3Ph0K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__CLYHD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Feed_container__3UySO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LogIn_container__348lj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Profile_container__WdMDr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SignUp_container__cE499\"};","import { useState } from \"react\";\nimport { ICredentials } from \"../../interfaces\";\n\nimport styles from './CredentialsForm.module.css';\n\ninterface CredentialsFormProps {\n  type: 'signup'|'login';\n  error: boolean;\n  onSubmit: (credentials: ICredentials) => void;\n}\n\nexport function CredentialsForm(props: CredentialsFormProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const word = props.type === 'signup' ? 'Sign up' : 'Log in';\n\n  function onSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    // Clear form\n    setEmail('');\n    setPassword('');\n\n    props.onSubmit({ email, password });\n  }\n\n  return (\n    <div>\n      <h1 className={styles.title}>{word}</h1>\n      {\n        props.error && (\n          <div className={styles.error}>\n            {props.type === 'login' ? 'Authentication failed.' : 'Registration failed.'}\n          </div>\n        )\n      }\n      <form onSubmit={onSubmit}>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"email\">Email</label>\n          <input type=\"email\" name=\"email\" value={email} onChange={e => setEmail(e.target.value)} />\n        </div>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"password\">Password</label>\n          <input type=\"password\" name=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\n        </div>\n        <div>\n          <input type=\"submit\" value={word} className={`${styles.btn} btn btnPrimary`} />\n        </div>\n      </form>\n      <div className={styles.separator}>\n      </div>\n      <div>\n        <form action=\"/api/auth/google\" method=\"get\">\n          <input type=\"submit\" value={`${word} with Google`} className={`${styles.btn} btn`} />\n        </form>\n      </div>\n    </div>\n  )\n}","import styles from './ErrorBox.module.css';\n\nexport function ErrorBox() {\n  return (\n    <div className={`${styles.container} box`}>\n      An error has occurred. Please try refreshing the page.\n    </div>\n  )\n}","import { IStory } from '../../interfaces';\nimport styles from './Story.module.css';\n\ninterface StoryProps {\n  story: IStory;\n  hideImage?: boolean;\n  onDelete?: () => void;\n}\n\nexport function Story(props: StoryProps) {\n  return (\n    <div className={`${styles.container} box`}>\n      {\n        !props.hideImage && (\n          <div className={styles.author}>\n            <img src={`api/profile/avatar?userId=${props.story.author.id}`} className={styles.avatar} alt=\"avatar\" />\n          </div>\n        )\n      }\n\n      <div className={styles.mainContent}>\n        <div className={styles.title}>\n          {props.story.title}\n        </div>\n        <div>\n          <a href={props.story.link}>{props.story.link}</a>\n          <span className={styles.authorName}> - {props.story.author.name}</span>\n        </div>\n      </div>\n      {\n        props.onDelete && (\n          <div className={styles.deletion}>\n            <button onClick={props.onDelete} className=\"btn btnSmall\">X</button>\n          </div>\n        )\n      }\n    </div>\n  )\n}","import React, { useState } from \"react\";\nimport { INewStory } from \"../../interfaces\";\n\nimport styles from './NewStory.module.css';\n\ninterface NewStoryProps {\n  onCreate: (story: INewStory) => void;\n}\n\nexport function NewStory(props: NewStoryProps) {\n  const [title, setTitle] = useState('');\n  const [link, setLink] = useState('');\n\n  function onSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    // Clear form\n    setTitle('');\n    setLink('');\n    \n    props.onCreate({ title, link });\n  }\n\n  return (\n    <div>\n      <h1>Add a story</h1>\n      <form onSubmit={onSubmit}>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"title\">Title:</label>\n          <input type=\"text\" name=\"title\" value={title} onChange={e => setTitle(e.target.value)} required />\n        </div>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"link\">Link:</label>\n          <input type=\"url\" name=\"link\" value={link} onChange={e => setLink(e.target.value)} required />\n        </div>\n        <div>\n          <button type=\"submit\" className=\"btn\">Submit</button>\n        </div>\n      </form>\n    </div>\n  )\n}","// import { ICredentials, IUser } from '../interfaces';\n\n// export async function logIn(credentials: ICredentials): Promise<IUser> {\n//   throw new Error('Not implemented yet!');\n// }\n\n// export async function logOut(): Promise<void> {\n//   throw new Error('Not implemented yet!');\n// }\n\n// export async function signUp(credentials: ICredentials): Promise<IUser> {\n//   throw new Error('Not implemented yet!');\n// }\n\nimport axios from 'axios';\nimport { ICredentials, IUser } from '../interfaces';\n\nexport async function logIn(credentials: ICredentials): Promise<IUser> {\n  const response = await axios.post<IUser>('/api/auth/login', credentials);\n  return response.data;\n}\n\nexport async function logOut(): Promise<void> {\n  await axios.post('/api/auth/logout');\n}\n\nexport async function signUp(credentials: ICredentials): Promise<IUser> {\n  const response = await axios.post<IUser>('/api/auth/signup', credentials);\n  return response.data;\n}\n","import axios from 'axios';\n\nexport async function updateProfile(username: string, avatar: File|null): Promise<void> {\n  const formData = new FormData();\n  formData.set('name', username);\n  if (avatar) {\n    formData.set('avatar', avatar);\n  }\n\n  await axios.post('/api/profile', formData, {\n    headers: {\n    'content-type': 'multipart/form-data'\n    }\n  });\n}","import axios from 'axios';\nimport { INewStory, IStory } from \"../interfaces\";\n\nexport async function fetchStories(authorId?: number): Promise<IStory[]> {\n  const response = await axios.get<IStory[]>('/api/stories', {\n    params: { authorId }\n  });\n  return response.data;\n}\n\nexport async function createStory(story: INewStory): Promise<void> {\n  await axios.post('/api/stories', story);\n}\n\nexport async function deleteStory(storyId: number): Promise<void> {\n  await axios.delete(`/api/stories/${storyId}`);\n}","import { Fragment } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { IUser } from '../../interfaces';\nimport { logOut } from '../../requests';\nimport styles from './Navbar.module.css';\n\ninterface NavbarProps {\n  currentUser: IUser|null;\n  onLogOut: () => void;\n}\n\nexport function Navbar(props: NavbarProps) {\n  const history = useHistory();\n\n  async function logOutAndRedirect() {\n    await logOut();\n    props.onLogOut();\n    history.push('/');\n  }\n\n  return (\n    <div className={styles.navbar}>\n      <div></div>\n      {\n        props.currentUser ?\n        (\n          <Fragment>\n            <Link to=\"/\" className=\"btn btnPrimary\">Feed</Link>\n            <Link to=\"/profile\" className=\"btn btnPrimary\">Profile</Link>\n            <button onClick={logOutAndRedirect} className=\"btn\">Log out</button>\n          </Fragment>\n        ) : (\n          <Fragment>\n            <Link to=\"/login\" className=\"btn btnPrimary\">Log in</Link>\n            <Link to=\"/signup\" className=\"btn btnPrimary\">Sign up</Link>\n          </Fragment>\n        )\n      }\n    </div>\n  );\n}","import React, { useEffect, useState } from \"react\";\nimport { ErrorBox, Story } from \"../../components\";\nimport { IStory } from \"../../interfaces\";\nimport { fetchStories } from \"../../requests\";\nimport styles from './Feed.module.css';\n\nexport function Feed() {\n  const [storiesLoaded, setStoriesLoaded] = useState(false);\n  const [stories, setStories] = useState<IStory[]>([]);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    if (!storiesLoaded) {\n      fetchStories()\n        .then(stories => {\n          setStories(stories);\n          setStoriesLoaded(true);\n        })\n        .catch(err => {\n          console.log(err);\n          setError(true);\n        });\n    }\n  })\n\n  return (\n    <div className={styles.container}>\n      {\n        error && <ErrorBox />\n      }\n      {stories.map(story => <Story story={story} key={story.id} />)}\n    </div>\n  )\n}","import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { CredentialsForm } from \"../../components\";\nimport { ICredentials, IUser } from \"../../interfaces\";\nimport { logIn } from \"../../requests\";\n\nimport styles from './LogIn.module.css';\n\ninterface LogInProps {\n  onLogIn: (user: IUser) => void;\n}\n\nexport function LogIn(props: LogInProps) {\n  const [error, setError] = useState(false);\n\n  const history = useHistory();\n\n  async function logInAndRedirect(credentials: ICredentials) {\n    setError(false);\n    try {\n      const user = await logIn(credentials);\n      props.onLogIn(user);\n      history.push('/');\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  return (\n    <div className={`${styles.container} box`}>\n      <CredentialsForm error={error} type=\"login\" onSubmit={logInAndRedirect} />\n    </div>\n  );\n}","import { useEffect, useState } from 'react';\nimport styles from './ProfileHeader.module.css';\n\ninterface ProfileHeaderProps {\n  username: string;\n  avatarCacheId: number;\n  onUpdate: (username: string, avatar: File|null) => void;\n}\n\nexport function ProfileHeader(props: ProfileHeaderProps) {\n  const [username, setUsername] = useState(props.username);\n  const [avatar, setAvatar] = useState<File|null>(null);\n\n  function onSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    props.onUpdate(username, avatar);\n  }\n\n  useEffect(() => {\n    setUsername(props.username);\n  }, [props.username])\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.author}>\n        <img src={`/api/profile/avatar?${props.avatarCacheId}`} className={styles.avatar} alt=\"avatar\" />\n      </div>\n      <div>\n        <form onSubmit={onSubmit}>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"name\">Name: </label>\n            <input type=\"text\" name=\"name\" value={username} onChange={e => setUsername(e.target.value)} />\n          </div>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"avatar\">Avatar: </label>\n            <input type=\"file\" name=\"avatar\" onChange={e => setAvatar(e.target.files ? e.target.files[0] : null)} />\n          </div>\n          <div>\n            <input type=\"submit\" value=\"Update profile\" className=\"btn btnSmall btnPrimary\" />\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}","import React, { useEffect, useState } from \"react\";\nimport { ErrorBox, NewStory, Story } from \"../../components\";\nimport { ProfileHeader } from \"../../components/ProfileHeader\";\nimport { INewStory, IStory, IUser } from \"../../interfaces\";\nimport { createStory, deleteStory, fetchStories, updateProfile } from \"../../requests\";\n\nimport styles from \"./Profile.module.css\";\n\ninterface ProfileProps {\n  currentUser: IUser;\n  onProfileChange: (user: IUser) => void;\n}\n\nexport function Profile(props: ProfileProps) {\n  const [storiesLoaded, setStoriesLoaded] = useState(false);\n  const [stories, setStories] = useState<IStory[]>([]);\n  const [error, setError] = useState(false);\n  const [avatarCacheId, setAvatarCacheId] = useState(Date.now());\n\n  function refreshStories() {\n    fetchStories(props.currentUser.id)\n      .then(stories => {\n        setStories(stories);\n        setStoriesLoaded(true);\n      })\n      .catch(err => {\n        console.log(err);\n        setError(true);\n      });\n  }\n\n  useEffect(() => {\n    if (!storiesLoaded) {\n      refreshStories();\n    }\n  })\n\n  async function createStoryAndRefresh(story: INewStory) {\n    try {\n      await createStory(story);\n      await refreshStories();\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n\n  async function deleteStoryAndRefresh(story: IStory) {\n    try {\n      await deleteStory(story.id);\n      await refreshStories();\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  async function updateProfileAndRedirect(name: string, avatar: File|null) {\n    try {\n      await updateProfile(name, avatar);\n      setAvatarCacheId(Date.now());\n      props.onProfileChange({\n        ...props.currentUser,\n        name,\n      });\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {\n        error && <ErrorBox />\n      }\n      <ProfileHeader onUpdate={updateProfileAndRedirect} username={props.currentUser.name} avatarCacheId={avatarCacheId} />\n      <div>\n        <h1>Your stories</h1>\n        {stories.map(story => <Story hideImage story={story} key={story.id} onDelete={() => deleteStoryAndRefresh(story)} />)}\n      </div>\n      <NewStory onCreate={createStoryAndRefresh}/>\n    </div>\n  );\n}","import { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { CredentialsForm } from \"../../components\";\nimport { ICredentials, IUser } from \"../../interfaces\";\nimport { signUp } from \"../../requests\";\n\nimport styles from './SignUp.module.css';\n\ninterface SignUpProps {\n  onSignUp: (user: IUser) => void;\n}\n\nexport function SignUp(props: SignUpProps) {\n  const [error, setError] = useState(false);\n\n  const history = useHistory();\n\n  async function signUpAndRedirect(credentials: ICredentials) {\n    try {\n      const user = await signUp(credentials);\n      props.onSignUp(user);\n      history.push('/');\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  return (\n    <div className={`${styles.container} box`}>\n      <CredentialsForm error={error} type=\"signup\" onSubmit={signUpAndRedirect} />\n    </div>\n  );\n}","import React, { Fragment, useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { Navbar } from './components';\nimport { Feed, LogIn, Profile, SignUp } from './pages';\nimport { IUser } from './interfaces';\nimport * as cookie from 'cookie';\n\nfunction getCurrentUserFromCookie(): IUser | null {\n  const userCookie = cookie.parse(document.cookie).user as string|undefined;\n  if (!userCookie) {\n    return null;\n  }\n  try {\n    return JSON.parse(userCookie);\n  } catch (error) {\n    return null;\n  }\n}\n\n\n\n\n\nexport default function App() {\n  const [currentUser, setCurrentUser] = useState(getCurrentUserFromCookie());\n  //const [currentUser, setCurrentUser] = useState<IUser|null>(null);\n\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route exact path=\"/login\">\n            <LogIn onLogIn={setCurrentUser} />\n          </Route>\n          <Route exact path=\"/profile\">\n            {currentUser ?\n              (\n                <Fragment>\n                  <Navbar currentUser={currentUser} onLogOut={() => setCurrentUser(null)} />\n                  <Profile currentUser={currentUser} onProfileChange={setCurrentUser} />\n                </Fragment>\n              ) :\n              <Redirect to=\"/login\" />\n            }\n          </Route>\n          <Route exact path=\"/signup\">\n            <SignUp onSignUp={setCurrentUser} />\n          </Route>\n          <Route exact path=\"/\">\n            <Navbar currentUser={currentUser} onLogOut={() => setCurrentUser(null)}  />\n            <Feed />\n          </Route>\n          <Route path=\"*\">\n            <Redirect to=\"/\" />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}